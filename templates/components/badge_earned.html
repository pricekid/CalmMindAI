{% if earned_badge %}
<!-- Badge Earned Modal -->
<div class="modal fade" id="badgeEarnedModal" tabindex="-1" aria-labelledby="badgeEarnedModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-gradient-primary text-white">
                <h5 class="modal-title" id="badgeEarnedModalLabel">
                    <i class="fas fa-award me-2"></i> Achievement Unlocked!
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center py-4">
                <div class="achievement-animation mb-3">
                    <div class="achievement-icon-large" style="background-color: {{ earned_badge.color }};">
                        <i class="fas {{ earned_badge.icon }} fa-2x text-white"></i>
                    </div>
                </div>
                
                <h3 class="badge-title mb-2">{{ earned_badge.name }}</h3>
                <p class="badge-description mb-3">{{ earned_badge.description }}</p>
                
                {% if earned_badge.type == 'streak' %}
                <div class="motivation-message alert alert-info">
                    {% if earned_badge.requirement == 3 %}
                    That kind of consistency rewires anxiety.
                    {% elif earned_badge.requirement == 7 %}
                    A full week of reflection builds powerful self-awareness.
                    {% elif earned_badge.requirement == 14 %}
                    Two weeks of practice is creating lasting neural pathways.
                    {% elif earned_badge.requirement == 30 %}
                    You've built a life-changing habit!
                    {% endif %}
                </div>
                {% endif %}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Continue</button>
                <a href="{{ url_for('achievements') }}" class="btn btn-outline-secondary">View All Achievements</a>
            </div>
        </div>
    </div>
</div>

<style>
.achievement-icon-large {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    animation: badgePulse 2s infinite;
}

.modal-content {
    border-radius: 15px;
    overflow: hidden;
}

.bg-gradient-primary {
    background: linear-gradient(135deg, #4a6fff 0%, #77e3fa 100%);
}

.badge-title {
    font-weight: 600;
    color: #333;
}

.badge-description {
    color: #666;
    font-size: 1.1rem;
}

@keyframes badgePulse {
    0% {
        box-shadow: 0 0 0 0 rgba(0, 123, 255, 0.4);
        transform: scale(1);
    }
    50% {
        box-shadow: 0 0 0 10px rgba(0, 123, 255, 0);
        transform: scale(1.05);
    }
    100% {
        box-shadow: 0 0 0 0 rgba(0, 123, 255, 0);
        transform: scale(1);
    }
}

.achievement-animation {
    position: relative;
}

.achievement-animation:before,
.achievement-animation:after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 130px;
    height: 130px;
    border-radius: 50%;
    background: transparent;
    border: 2px dashed rgba(0, 123, 255, 0.5);
    animation: spin 10s linear infinite;
}

.achievement-animation:after {
    width: 150px;
    height: 150px;
    animation-direction: reverse;
    animation-duration: 15s;
}

@keyframes spin {
    0% {
        transform: translate(-50%, -50%) rotate(0deg);
    }
    100% {
        transform: translate(-50%, -50%) rotate(360deg);
    }
}
</style>
{% endif %}