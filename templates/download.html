{% extends "layout.html" %}

{% block title %}Download Dear Teddy{% endblock %}

{% block styles %}
<style>
    body {
        background: linear-gradient(135deg, #A05C2C 0%, #1D4D4F 100%) !important;
        color: white !important;
    }
    
    .download-section {
        background-color: rgba(255, 255, 255, 0.95);
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }
    
    .download-hero {
        background: linear-gradient(135deg, #A05C2C 0%, #d1a673 100%);
        padding: 60px 40px;
        color: white;
    }
    
    .download-content {
        padding: 40px;
        color: #333;
    }
    
    .app-screenshot {
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        max-width: 100%;
        height: auto;
    }
    
    .download-btn {
        background-color: #A05C2C;
        color: white;
        font-weight: bold;
        padding: 15px 30px;
        font-size: 18px;
        border-radius: 30px;
        transition: all 0.3s ease;
        border: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }
    
    .download-btn:hover {
        background-color: #1D4D4F;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        color: white;
    }
    
    .feature-icon {
        width: 50px;
        height: 50px;
        background-color: rgba(160, 92, 44, 0.15);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #A05C2C;
        font-size: 24px;
        margin-bottom: 15px;
    }
    
    .testimonial {
        background-color: #f8f9fa;
        border-radius: 10px;
        padding: 20px;
        margin-top: 20px;
        font-style: italic;
        position: relative;
    }
    
    .testimonial::before {
        content: """;
        font-size: 60px;
        color: rgba(160, 92, 44, 0.2);
        position: absolute;
        top: -10px;
        left: 10px;
    }
    
    .system-badge {
        display: inline-block;
        background-color: #f8f9fa;
        color: #333;
        font-size: 14px;
        padding: 8px 15px;
        border-radius: 20px;
        margin-right: 10px;
        margin-bottom: 10px;
        font-weight: 500;
    }
    
    .system-badge i {
        margin-right: 5px;
    }
</style>
{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <div class="download-section">
                <div class="download-hero text-center">
                    <img src="{{ url_for('static', filename='images/teddy-logo.svg') }}" alt="Dear Teddy Logo" height="80" class="mb-4">
                    <h1 class="display-4 fw-bold mb-3">Download Dear Teddy</h1>
                    <p class="lead mb-0">Your personal AI journaling companion for mental wellness</p>
                </div>
                
                <div class="download-content">
                    <div class="row align-items-center mb-5">
                        <div class="col-md-6">
                            <h2 class="mb-4">Dear Teddy for Desktop</h2>
                            <p class="lead">Enjoy a seamless journaling experience with offline access, desktop notifications, and enhanced privacy.</p>
                            <div class="mt-4 mb-4">
                                <div class="system-badge"><i class="fab fa-windows"></i> Windows 10/11</div>
                                <div class="system-badge"><i class="fab fa-apple"></i> macOS 10.15+</div>
                                <div class="system-badge"><i class="fab fa-linux"></i> Ubuntu/Debian</div>
                            </div>
                            <div class="os-specific-download">
                                <a href="/download-app?os=mac" class="download-btn mac-download">
                                    <i class="fab fa-apple me-2"></i> Download for macOS
                                </a>
                                <a href="/download-app?os=windows" class="download-btn windows-download">
                                    <i class="fab fa-windows me-2"></i> Download for Windows
                                </a>
                                <a href="/download-app?os=linux" class="download-btn linux-download">
                                    <i class="fab fa-linux me-2"></i> Download for Linux
                                </a>
                            </div>
                            <p class="text-muted small mt-2">Version 1.2.3 • 5.7 MB</p>
                            <script>
                                // Detect OS and show appropriate download button
                                document.addEventListener('DOMContentLoaded', function() {
                                    var userAgent = navigator.userAgent.toLowerCase();
                                    var isMac = /macintosh|mac os x/i.test(userAgent);
                                    var isWindows = /windows|win32/i.test(userAgent);
                                    var isLinux = /linux|x11/i.test(userAgent) && !/android/i.test(userAgent);
                                    
                                    // Hide all download buttons initially
                                    document.querySelectorAll('.download-btn').forEach(function(btn) {
                                        btn.style.display = 'none';
                                    });
                                    
                                    // Show only the appropriate button
                                    if (isMac) {
                                        document.querySelector('.mac-download').style.display = 'inline-flex';
                                    } else if (isWindows) {
                                        document.querySelector('.windows-download').style.display = 'inline-flex';
                                    } else if (isLinux) {
                                        document.querySelector('.linux-download').style.display = 'inline-flex';
                                    } else {
                                        // If can't detect, show all buttons
                                        document.querySelectorAll('.download-btn').forEach(function(btn) {
                                            btn.style.display = 'inline-flex';
                                            btn.style.marginRight = '10px';
                                        });
                                    }
                                });
                            </script>
                        </div>
                        <div class="col-md-6 text-center">
                            <img src="{{ url_for('static', filename='images/app-screenshot.png') }}" alt="Dear Teddy App Screenshot" class="app-screenshot" onerror="this.src='{{ url_for('static', filename='images/teddy-logo.svg') }}'; this.style.maxWidth='200px';">
                        </div>
                    </div>
                    
                    <hr class="my-5">
                    
                    <h3 class="mb-4 text-center">Why Download Dear Teddy?</h3>
                    <div class="row text-center">
                        <div class="col-md-4 mb-4">
                            <div class="feature-icon mx-auto">
                                <i class="fas fa-wifi-slash"></i>
                            </div>
                            <h5>Work Offline</h5>
                            <p>Continue journaling even without an internet connection. Your entries sync when you're back online.</p>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="feature-icon mx-auto">
                                <i class="fas fa-bell"></i>
                            </div>
                            <h5>Desktop Notifications</h5>
                            <p>Receive gentle reminders to journal directly on your desktop, even when your browser is closed.</p>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="feature-icon mx-auto">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <h5>Enhanced Privacy</h5>
                            <p>Enjoy additional security features and local storage options for your most personal thoughts.</p>
                        </div>
                    </div>
                    
                    <div class="testimonial mt-5">
                        <p>"Having Dear Teddy as a desktop app has made it so much easier to maintain my daily journaling habit. The offline access is particularly helpful when I'm traveling."</p>
                        <p class="text-end mb-0"><strong>— Sarah K.</strong></p>
                    </div>
                    
                    <div class="text-center mt-5">
                        <div class="os-specific-download-footer">
                            <a href="/download-app?os=mac" class="download-btn mac-download">
                                <i class="fab fa-apple me-2"></i> Download for Mac
                            </a>
                            <a href="/download-app?os=windows" class="download-btn windows-download">
                                <i class="fab fa-windows me-2"></i> Download for Windows
                            </a>
                            <a href="/download-app?os=linux" class="download-btn linux-download">
                                <i class="fab fa-linux me-2"></i> Download for Linux
                            </a>
                        </div>
                        <script>
                            // Apply the same OS detection to the footer buttons
                            document.addEventListener('DOMContentLoaded', function() {
                                var userAgent = navigator.userAgent.toLowerCase();
                                var isMac = /macintosh|mac os x/i.test(userAgent);
                                var isWindows = /windows|win32/i.test(userAgent);
                                var isLinux = /linux|x11/i.test(userAgent) && !/android/i.test(userAgent);
                                
                                // Hide all download buttons in the footer initially
                                document.querySelectorAll('.os-specific-download-footer .download-btn').forEach(function(btn) {
                                    btn.style.display = 'none';
                                });
                                
                                // Show only the appropriate button in the footer
                                if (isMac) {
                                    document.querySelector('.os-specific-download-footer .mac-download').style.display = 'inline-flex';
                                } else if (isWindows) {
                                    document.querySelector('.os-specific-download-footer .windows-download').style.display = 'inline-flex';
                                } else if (isLinux) {
                                    document.querySelector('.os-specific-download-footer .linux-download').style.display = 'inline-flex';
                                } else {
                                    // If can't detect, show all buttons
                                    document.querySelectorAll('.os-specific-download-footer .download-btn').forEach(function(btn) {
                                        btn.style.display = 'inline-flex';
                                        btn.style.marginRight = '10px';
                                    });
                                }
                            });
                        </script>
                        <p class="mt-3">
                            <a href="#mobile-install" class="text-muted" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="mobile-install">Looking for mobile installation instead? <i class="fas fa-arrow-right ms-1"></i></a>
                        </p>
                        <div class="collapse mt-4" id="mobile-install">
                            <div class="card card-body">
                                <h5 class="mb-3">Install on Mobile Devices</h5>
                                <p>Dear Teddy works as a Progressive Web App (PWA) on all modern devices.</p>
                                <p><strong>On iOS:</strong> Open Safari, visit <code>www.dearteddy.app</code>, tap the share icon, then "Add to Home Screen"</p>
                                <p><strong>On Android:</strong> Open Chrome, visit <code>www.dearteddy.app</code>, tap the menu, then "Add to Home Screen"</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}