{% extends "layout.html" %}

{% block title %}Tell Us About Yourself{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card shadow-sm">
        <div class="card-body p-5">
          <h1 class="text-center mb-4">Tell Us About Yourself</h1>
          
          <div class="alert alert-info mb-4">
            <i class="fas fa-heart me-2"></i>
            <strong>To help Dear Teddy better understand you and guide our conversations with more care,</strong> you can share a little about yourself. This helps me offer insight that fits your life stage, roles, and goals. It's totally optional, and you can skip anytime.
          </div>
          
          <form method="POST" action="{{ url_for('onboarding.demographics') }}">
            {{ form.csrf_token }}
            
            <!-- Age Range -->
            <div class="form-group mb-4">
              <label for="age_range" class="form-label">Age Range (Optional)</label>
              <select id="age_range" name="age_range" class="form-select">
                <option value="">Select your age range</option>
                <option value="under_18">Under 18</option>
                <option value="18_24">18–24</option>
                <option value="25_34">25–34</option>
                <option value="35_44">35–44</option>
                <option value="45_54">45–54</option>
                <option value="55_plus">55+</option>
              </select>
            </div>
            
            <!-- Relationship Status -->
            <div class="form-group mb-4">
              <label for="relationship_status" class="form-label">Relationship Status (Optional)</label>
              <select id="relationship_status" name="relationship_status" class="form-select">
                <option value="">Select your relationship status</option>
                <option value="single">Single</option>
                <option value="in_relationship">In a relationship</option>
                <option value="married_committed">Married or committed</option>
                <option value="complicated">It's complicated</option>
                <option value="prefer_not_say">Prefer not to say</option>
              </select>
            </div>
            
            <!-- Children -->
            <div class="form-group mb-4">
              <label class="form-label">Do you have children? (Optional)</label>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="has_children" id="has_children_yes" value="yes">
                <label class="form-check-label" for="has_children_yes">
                  Yes
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="has_children" id="has_children_no" value="no">
                <label class="form-check-label" for="has_children_no">
                  No
                </label>
              </div>
            </div>
            
            <!-- Life Focus -->
            <div class="form-group mb-5">
              <label class="form-label">What best describes your current life focus? (Optional - Select all that apply)</label>
              <div class="row">
                <div class="col-md-6">
                  <div class="form-check mb-2">
                    <input class="form-check-input" type="checkbox" name="life_focus" value="student" id="focus_student">
                    <label class="form-check-label" for="focus_student">
                      Student
                    </label>
                  </div>
                  <div class="form-check mb-2">
                    <input class="form-check-input" type="checkbox" name="life_focus" value="working_professional" id="focus_professional">
                    <label class="form-check-label" for="focus_professional">
                      Working professional
                    </label>
                  </div>
                  <div class="form-check mb-2">
                    <input class="form-check-input" type="checkbox" name="life_focus" value="caregiver_parent" id="focus_caregiver">
                    <label class="form-check-label" for="focus_caregiver">
                      Caregiver/Parent
                    </label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-check mb-2">
                    <input class="form-check-input" type="checkbox" name="life_focus" value="exploring_purpose" id="focus_purpose">
                    <label class="form-check-label" for="focus_purpose">
                      Exploring purpose
                    </label>
                  </div>
                  <div class="form-check mb-2">
                    <input class="form-check-input" type="checkbox" name="life_focus" value="managing_mental_health" id="focus_mental_health">
                    <label class="form-check-label" for="focus_mental_health">
                      Managing mental health
                    </label>
                  </div>
                  <div class="form-check mb-2">
                    <input class="form-check-input" type="checkbox" name="life_focus" value="other" id="focus_other">
                    <label class="form-check-label" for="focus_other">
                      Other:
                    </label>
                    <input type="text" name="life_focus_other" class="form-control form-control-sm mt-1" placeholder="Please specify" id="focus_other_text" disabled>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="d-grid gap-3">
              <button type="submit" class="btn btn-primary btn-lg">Continue</button>
              <a href="{{ url_for('onboarding.skip_demographics') }}" class="btn btn-outline-secondary">Skip for now</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Enable/disable "Other" text field based on checkbox
  document.getElementById('focus_other').addEventListener('change', function() {
    const otherText = document.getElementById('focus_other_text');
    if (this.checked) {
      otherText.disabled = false;
      otherText.focus();
    } else {
      otherText.disabled = true;
      otherText.value = '';
    }
  });
</script>
{% endblock %}